#!/bin/bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )";
ROOT=${DIR}/..;

# environment variables
source ${ROOT}/.env;

importDatabase()
{
    docker exec -i ${MYSQL_CONTAINER} mysql --verbose -uroot -p${MYSQL_ROOT_PASSWORD} -e "drop database $MYSQL_DATABASE";

    docker exec -i ${MYSQL_CONTAINER} mysql --verbose -uroot -p${MYSQL_ROOT_PASSWORD} -e "create database $MYSQL_DATABASE character set utf8 collate utf8_unicode_ci";

    cat ${ROOT}/mysql/dumps/${MYSQL_DATABASE}.sql | docker exec -i ${MYSQL_CONTAINER} mysql --verbose -uroot -p${MYSQL_ROOT_PASSWORD} ${MYSQL_DATABASE};
}

importDatabase;

exit 0;